import './polyfills.server.mjs';
import{a as Ze,d as Xe}from"./chunk-MG65GMZK.mjs";import{a as gi,c as vi,d as _i}from"./chunk-JIYRGRX6.mjs";import{a as St,b as kt,c as At}from"./chunk-5U7ESCOV.mjs";import{b as Je,d as wt,e as Ye}from"./chunk-452AOCGI.mjs";import{a as wi}from"./chunk-OG347J5E.mjs";import{c as yi,d as bi,e as Ii,f as Rt,g as Mt,j as Ci}from"./chunk-O5VTXH4O.mjs";import{J as Zt,K as si,L as di,N as li,O as hi,P as pi,Q as mi,R as ui,U as fi,a as ti,b as R,c as z,d as lt,e as xt,f as ei,g as ii,h as ni,i as oi,j as ai,k as ht,l as Et,m as ri,n as A,q as ci,r as M,s as et}from"./chunk-3BX64D3K.mjs";import{a as tt,c as Ge,d as Ue,h as Qe,i as Ke,k as We}from"./chunk-33XPNI2I.mjs";import{$ as _t,$b as He,A as k,Ab as K,B as Vt,Bb as Ne,C as ye,Cb as Be,Db as Le,E as ft,F as be,Fa as Ut,H as Ie,J as Ce,M as qt,Ma as $,Na as J,Nb as ze,Oa as Fe,P as we,Qa as Te,R as xe,S as Ee,Sa as De,T as Se,Ua as Oe,V as rt,Va as ct,W as gt,Y as vt,Z as ke,_ as b,ba as x,c as at,cb as st,da as l,dc as $e,ea as T,eb as Q,f as me,h as ue,ha as Ae,i as fe,ib as j,ic as It,j as ut,ja as U,jb as D,k as ge,ka as yt,kb as dt,kc as Ve,lb as je,lc as qe,m as S,ma as X,n as ve,nb as Qt,nc as Ct,pb as Kt,q as _e,r as C,sa as Re,t as L,ta as Me,ua as Gt,wa as bt,x as Z,xb as Y,y as B,yb as Wt,zb as Pe}from"./chunk-LC4A2UNK.mjs";import{a as v,b as y}from"./chunk-NDYDZJSS.mjs";var it=R("[Restaurant] Load Restaurants"),Ft=R("[Restaurant] Load Restaurants Success",z()),Tt=R("[Restaurant] Load Restaurants Failure",z()),So=R("[Menu] Load Items",z()),ko=R("[Menu] Load Items Success",z()),Ao=R("[Menu] Load Items Failure",z());var Dt=R("[Hydration] Hydrate"),Ei=R("[Hydration] Hydrate Success",z()),Ot=R("[Hydration] Hydrate Failure",z());var Si=(()=>{let t=class t{constructor(i){this.store=i,this.title="dyne",this.store.dispatch(it()),this.store.dispatch(Dt())}};t.\u0275fac=function(n){return new(n||t)(J(A))},t.\u0275cmp=U({type:t,selectors:[["app-root"]],standalone:!0,features:[K],decls:2,vars:0,consts:[[1,"app-container"]],template:function(n,a){n&1&&(j(0,"div",0),dt(1,"router-outlet"),D())},dependencies:[Je],styles:[".app-container[_ngcontent-%COMP%]{background:linear-gradient(180.02deg,#fff 34.67%,#999 99.98%);min-height:100vh;flex:1;text-align:center;display:flex;flex-direction:column}"]});let e=t;return e})();var wn=new x("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var ki=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=_t({providers:[si,{provide:wn,useValue:{separatorKeyCodes:[13]}}],imports:[Zt,di,Zt]});let e=t;return e})();var En=e=>({"background-image":e});function Sn(e,t){if(e&1&&(j(0,"div",5),Y(1),D()),e&2){let o=t.$implicit;$(),Pe(" ",o," ")}}var Ai=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=U({type:t,selectors:[["app-restaurant"]],inputs:{restaurant:"restaurant"},standalone:!0,features:[K],decls:8,vars:5,consts:[[1,"restaurant-card"],[1,"card-image","darken",3,"ngStyle"],[1,"restaurant-name"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"]],template:function(n,a){n&1&&(j(0,"mat-card",0)(1,"div",1)(2,"div")(3,"div",2),Y(4),D(),j(5,"mat-card-content")(6,"div",3),st(7,Sn,2,1,"div",4),D()()()()()),n&2&&($(),Q("ngStyle",Ne(3,En,"url("+((a.restaurant==null?null:a.restaurant.restaurantBackground)||(a.restaurant==null?null:a.restaurant.background))+")")),$(3),Wt(a.restaurant==null?null:a.restaurant.name),$(3),Q("ngForOf",a.restaurant==null?null:a.restaurant.tags))},dependencies:[Ct,It,Ve,fi,mi,ui,ki],styles:[".restaurant-card[_ngcontent-%COMP%]{width:100%;min-width:163px;margin:3px 3px 15px;display:flex;flex-direction:column}.restaurant-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:0}.card-image[_ngcontent-%COMP%]{height:263px;background-size:cover;background-position:center;position:relative;display:flex;align-items:flex-end;padding:16px;border-radius:5px}.card-image.darken[_ngcontent-%COMP%]{filter:brightness(.8)}.restaurant-name[_ngcontent-%COMP%]{font-family:Inter-Meduim;font-size:16px;line-height:19.36px;text-align:left;color:#fff}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.tags[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-family:Inter-Regular;font-size:11px;line-height:13.31px;text-align:left;border:1px solid white;background-color:#fff;margin-right:8px;border-radius:5px;padding:3px}"],changeDetection:0});let e=t;return e})();function An(e,t){if(e&1){let o=je();j(0,"app-restaurant",6),Qt("click",function(){let n=Re(o).$implicit,a=Kt();return Me(a.goToMenu(n))}),D()}if(e&2){let o=t.$implicit;Q("restaurant",o)}}var Ri=(()=>{let t=class t{constructor(i,n){this.store=i,this.router=n}ngOnInit(){this.restaurants$=this.store.select(gi),this.loading$=this.store.select(vi),this.error$=this.store.select(_i)}goToMenu(i){i.id&&this.router.navigate(["/menu",i.id])}};t.\u0275fac=function(n){return new(n||t)(J(A),J(wt))},t.\u0275cmp=U({type:t,selectors:[["app-home"]],standalone:!0,features:[K],decls:9,vars:3,consts:[[1,"home-container"],["color","primary"],[1,"spacer"],["src","./assets/menu.png","alt","Menu",1,"menu-image"],[1,"restaurants-container"],[3,"restaurant","click",4,"ngFor","ngForOf"],[3,"click","restaurant"]],template:function(n,a){n&1&&(j(0,"div",0)(1,"mat-toolbar",1)(2,"span"),Y(3,"Restaurants"),D(),dt(4,"span",2)(5,"img",3),D(),j(6,"div",4),st(7,An,1,1,"app-restaurant",5),Be(8,"async"),D()()),n&2&&($(7),Q("ngForOf",Le(8,1,a.restaurants$)))},dependencies:[Ct,It,qe,Ue,hi,li,pi,Ai],styles:[".restaurants-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;padding:16px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"],changeDetection:0});let e=t;return e})();var Mi=[{path:"",component:Ri},{path:"menu/:id",loadComponent:()=>import("./chunk-FQLWC6H3.mjs").then(e=>e.MenuComponent)},{path:"menu/:menuId/items/:name",loadComponent:()=>import("./chunk-2HUWIWD6.mjs").then(e=>e.ItemsComponent)},{path:"cart",loadComponent:()=>import("./chunk-XYBCBQPL.mjs").then(e=>e.CartComponent)},{path:"**",redirectTo:""}];var Rn="@",Mn=(()=>{let t=class t{constructor(i,n,a,r,s){this.doc=i,this.delegate=n,this.zone=a,this.animationType=r,this.moduleImpl=s,this._rendererFactoryPromise=null,this.scheduler=T(Te,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-VHOOMYFU.mjs").then(n=>n)).catch(n=>{throw new ke(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:a})=>{this._engine=n(this.animationType,this.doc);let r=new a(this.delegate,this._engine,this.zone);return this.delegate=r,r})}createRenderer(i,n){let a=this.delegate.createRenderer(i,n);if(a.\u0275type===0)return a;typeof a.throwOnSyntheticProps=="boolean"&&(a.throwOnSyntheticProps=!1);let r=new Xt(a);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let _=s.createRenderer(i,n);r.use(_),this.scheduler?.notify(9)}).catch(s=>{r.use(a)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(n){Fe()},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})(),Xt=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let o of this.replay)o(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,o){return this.delegate.createElement(t,o)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,o){this.delegate.appendChild(t,o)}insertBefore(t,o,i,n){this.delegate.insertBefore(t,o,i,n)}removeChild(t,o,i){this.delegate.removeChild(t,o,i)}selectRootElement(t,o){return this.delegate.selectRootElement(t,o)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,o,i,n){this.delegate.setAttribute(t,o,i,n)}removeAttribute(t,o,i){this.delegate.removeAttribute(t,o,i)}addClass(t,o){this.delegate.addClass(t,o)}removeClass(t,o){this.delegate.removeClass(t,o)}setStyle(t,o,i,n){this.delegate.setStyle(t,o,i,n)}removeStyle(t,o,i){this.delegate.removeStyle(t,o,i)}setProperty(t,o,i){this.shouldReplay(o)&&this.replay.push(n=>n.setProperty(t,o,i)),this.delegate.setProperty(t,o,i)}setValue(t,o){this.delegate.setValue(t,o)}listen(t,o,i){return this.shouldReplay(o)&&this.replay.push(n=>n.listen(t,o,i)),this.delegate.listen(t,o,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(Rn)}};function Fi(e="animations"){return Oe("NgAsyncAnimations"),X([{provide:De,useFactory:(t,o,i)=>new Mn(t,o,i,e),deps:[$e,Qe,ct]},{provide:Ut,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Fn={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},jt="__@ngrx/effects_create__";function V(e,t={}){let o=t.functional?e:e(),i=v(v({},Fn),t);return Object.defineProperty(o,jt,{value:i}),o}function Tn(e){return Object.getOwnPropertyNames(e).filter(i=>e[i]&&e[i].hasOwnProperty(jt)?e[i][jt].hasOwnProperty("dispatch"):!1).map(i=>{let n=e[i][jt];return v({propertyName:i},n)})}function Dn(e){return Tn(e)}function Ti(e){return Object.getPrototypeOf(e)}function On(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Di(e){return typeof e=="function"}function jn(e){return e.filter(Di)}function Pn(e,t,o){let i=Ti(e),a=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,r=Dn(e).map(({propertyName:s,dispatch:_,useEffectsErrorHandler:h})=>{let d=typeof e[s]=="function"?e[s]():e[s],c=h?o(d,t):d;return _===!1?c.pipe(be()):c.pipe(we()).pipe(C(w=>({effect:e[s],notification:w,propertyName:s,sourceName:a,sourceInstance:e})))});return Z(...r)}var Nn=10;function Oi(e,t,o=Nn){return e.pipe(k(i=>(t&&t.handleError(i),o<=1?e:Oi(e,t,o-1))))}var q=(()=>{let t=class t extends at{constructor(i){super(),i&&(this.source=i)}lift(i){let n=new t;return n.source=this,n.operator=i,n}};t.\u0275fac=function(n){return new(n||t)(l(Et))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function G(...e){return B(t=>e.some(o=>typeof o=="string"?o===t.type:o.type===t.type))}var rr=new x("@ngrx/effects Internal Root Guard"),cr=new x("@ngrx/effects User Provided Effects"),sr=new x("@ngrx/effects Internal Root Effects"),dr=new x("@ngrx/effects Internal Root Effects Instances"),lr=new x("@ngrx/effects Internal Feature Effects"),hr=new x("@ngrx/effects Internal Feature Effects Instance Groups"),Bn=new x("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Oi}),Ln="@ngrx/effects/init",zn=R(Ln);function Hn(e,t){if(e.notification.kind==="N"){let o=e.notification.value;!$n(o)&&t.handleError(new Error(`Effect ${Vn(e)} dispatched an invalid action: ${qn(o)}`))}}function $n(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Vn({propertyName:e,sourceInstance:t,sourceName:o}){let i=typeof t[e]=="function";return!!o?`"${o}.${String(e)}${i?"()":""}"`:`"${String(e)}()"`}function qn(e){try{return JSON.stringify(e)}catch{return e}}var Gn="ngrxOnIdentifyEffects";function Un(e){return Jt(e,Gn)}var Qn="ngrxOnRunEffects";function Kn(e){return Jt(e,Qn)}var Wn="ngrxOnInitEffects";function Zn(e){return Jt(e,Wn)}function Jt(e,t){return e&&t in e&&typeof e[t]=="function"}var ji=(()=>{let t=class t extends me{constructor(i,n){super(),this.errorHandler=i,this.effectsErrorHandler=n}addEffects(i){this.next(i)}toActions(){return this.pipe(qt(i=>On(i)?Ti(i):i),L(i=>i.pipe(qt(Xn))),L(i=>{let n=i.pipe(Ce(r=>Jn(this.errorHandler,this.effectsErrorHandler)(r)),C(r=>(Hn(r,this.errorHandler),r.notification)),B(r=>r.kind==="N"&&r.value!=null),Ie()),a=i.pipe(ft(1),B(Zn),C(r=>r.ngrxOnInitEffects()));return Z(n,a)}))}};t.\u0275fac=function(n){return new(n||t)(l(bt),l(Bn))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Xn(e){return Un(e)?e.ngrxOnIdentifyEffects():""}function Jn(e,t){return o=>{let i=Pn(o,e,t);return Kn(o)?o.ngrxOnRunEffects(i):i}}var Yn=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(i,n){this.effectSources=i,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(n){return new(n||t)(l(ji),l(A))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Pi(...e){let t=e.flat(),o=jn(t);return X([o,{provide:Ae,multi:!0,useValue:()=>{T(ii),T(ni,{optional:!0});let i=T(Yn),n=T(ji),a=!i.isStarted;a&&i.start();for(let r of t){let s=Di(r)?T(r):r;n.addEffects(s)}a&&T(A).dispatch(zn())}}])}var mt="PERFORM_ACTION",to="REFRESH",$i="RESET",Vi="ROLLBACK",qi="COMMIT",Gi="SWEEP",Ui="TOGGLE_ACTION",eo="SET_ACTIONS_ACTIVE",Qi="JUMP_TO_STATE",Ki="JUMP_TO_ACTION",he="IMPORT_STATE",Wi="LOCK_CHANGES",Zi="PAUSE_RECORDING",ot=class{constructor(t,o){if(this.action=t,this.timestamp=o,this.type=mt,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Yt=class{constructor(){this.type=to}},te=class{constructor(t){this.timestamp=t,this.type=$i}},ee=class{constructor(t){this.timestamp=t,this.type=Vi}},ie=class{constructor(t){this.timestamp=t,this.type=qi}},ne=class{constructor(){this.type=Gi}},oe=class{constructor(t){this.id=t,this.type=Ui}};var ae=class{constructor(t){this.index=t,this.type=Qi}},re=class{constructor(t){this.actionId=t,this.type=Ki}},ce=class{constructor(t){this.nextLiftedState=t,this.type=he}},se=class{constructor(t){this.status=t,this.type=Wi}},de=class{constructor(t){this.status=t,this.type=Zi}};var zt=new x("@ngrx/store-devtools Options"),Ni=new x("@ngrx/store-devtools Initial Config");function Xi(){return null}var io="NgRx Store DevTools";function no(e){let t={maxAge:!1,monitor:Xi,actionSanitizer:void 0,stateSanitizer:void 0,name:io,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof e=="function"?e():e,i=o.logOnly?{pause:!0,export:!0,test:!0}:!1,n=o.features||i||t.features;n.import===!0&&(n.import="custom");let a=Object.assign({},t,{features:n},o);if(a.maxAge&&a.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${a.maxAge}`);return a}function Bi(e,t){return e.filter(o=>t.indexOf(o)<0)}function Ji(e){let{computedStates:t,currentStateIndex:o}=e;if(o>=t.length){let{state:n}=t[t.length-1];return n}let{state:i}=t[o];return i}function pt(e){return new ot(e,+Date.now())}function oo(e,t){return Object.keys(t).reduce((o,i)=>{let n=Number(i);return o[n]=Yi(e,t[n],n),o},{})}function Yi(e,t,o){return y(v({},t),{action:e(t.action,o)})}function ao(e,t){return t.map((o,i)=>({state:tn(e,o.state,i),error:o.error}))}function tn(e,t,o){return e(t,o)}function en(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function ro(e,t,o,i){let n=[],a={},r=[];return e.stagedActionIds.forEach((s,_)=>{let h=e.actionsById[s];h&&(_&&pe(e.computedStates[_],h,t,o,i)||(a[s]=h,n.push(s),r.push(e.computedStates[_])))}),y(v({},e),{stagedActionIds:n,actionsById:a,computedStates:r})}function pe(e,t,o,i,n){let a=o&&!o(e,t.action),r=i&&!t.action.type.match(i.map(_=>Li(_)).join("|")),s=n&&t.action.type.match(n.map(_=>Li(_)).join("|"));return a||r||s}function Li(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function nn(e){return{ngZone:e?T(ct):null,connectInZone:e}}var Ht=(()=>{let t=class t extends xt{};t.\u0275fac=(()=>{let i;return function(a){return(i||(i=Gt(t)))(a||t)}})(),t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})(),Nt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},le=new x("@ngrx/store-devtools Redux Devtools Extension"),on=(()=>{let t=class t{constructor(i,n,a){this.config=n,this.dispatcher=a,this.zoneConfig=nn(this.config.connectInZone),this.devtoolsExtension=i,this.createActionStreams()}notify(i,n){if(this.devtoolsExtension)if(i.type===mt){if(n.isLocked||n.isPaused)return;let a=Ji(n);if(en(this.config)&&pe(a,i,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let r=this.config.stateSanitizer?tn(this.config.stateSanitizer,a,n.currentStateIndex):a,s=this.config.actionSanitizer?Yi(this.config.actionSanitizer,i,n.nextActionId):i;this.sendToReduxDevtools(()=>this.extensionConnection.send(s,r))}else{let a=y(v({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?oo(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?ao(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,a,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new at(i=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(a=>i.next(a)),n.unsubscribe}):ut}createActionStreams(){let i=this.createChangesObservable().pipe(Ee()),n=i.pipe(B(d=>d.type===Nt.START)),a=i.pipe(B(d=>d.type===Nt.STOP)),r=i.pipe(B(d=>d.type===Nt.DISPATCH),C(d=>this.unwrapAction(d.payload)),Vt(d=>d.type===he?this.dispatcher.pipe(B(c=>c.type===ht),_e(1e3),ye(1e3),C(()=>d),k(()=>S(d)),ft(1)):S(d))),_=i.pipe(B(d=>d.type===Nt.ACTION),C(d=>this.unwrapAction(d.payload))).pipe(gt(a)),h=r.pipe(gt(a));this.start$=n.pipe(gt(a)),this.actions$=this.start$.pipe(rt(()=>_)),this.liftedActions$=this.start$.pipe(rt(()=>h))}unwrapAction(i){return typeof i=="string"?(0,eval)(`(${i})`):i}getExtensionConfig(i){let n={name:i.name,features:i.features,serialize:i.serialize,autoPause:i.autoPause??!1,trace:i.trace??!1,traceLimit:i.traceLimit??75};return i.maxAge!==!1&&(n.maxAge=i.maxAge),n}sendToReduxDevtools(i){try{i()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}};t.\u0275fac=function(n){return new(n||t)(l(le),l(zt),l(Ht))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})(),Lt={type:lt},co="@ngrx/store-devtools/recompute",so={type:co};function an(e,t,o,i,n){if(i)return{state:o,error:"Interrupted by an error up the chain"};let a=o,r;try{a=e(o,t)}catch(s){r=s.toString(),n.handleError(s)}return{state:a,error:r}}function Bt(e,t,o,i,n,a,r,s,_){if(t>=e.length&&e.length===a.length)return e;let h=e.slice(0,t),d=a.length-(_?1:0);for(let c=t;c<d;c++){let u=a[c],w=n[u].action,m=h[c-1],p=m?m.state:i,P=m?m.error:void 0,N=r.indexOf(u)>-1?m:an(o,w,p,P,s);h.push(N)}return _&&h.push(e[e.length-1]),h}function lo(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:pt(Lt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function ho(e,t,o,i,n={}){return a=>(r,s)=>{let{monitorState:_,actionsById:h,nextActionId:d,stagedActionIds:c,skippedActionIds:u,committedState:w,currentStateIndex:m,computedStates:p,isLocked:P,isPaused:E}=r||t;r||(h=Object.create(h));function N(I){let g=I,H=c.slice(1,g+1);for(let O=0;O<H.length;O++)if(p[O+1].error){g=O,H=c.slice(1,g+1);break}else delete h[H[O]];u=u.filter(O=>H.indexOf(O)===-1),c=[0,...c.slice(g+1)],w=p[g].state,p=p.slice(g),m=m>g?m-g:0}function W(){h={0:pt(Lt)},d=1,c=[0],u=[],w=p[m].state,m=0,p=[]}let f=0;switch(s.type){case Wi:{P=s.status,f=1/0;break}case Zi:{E=s.status,E?(c=[...c,d],h[d]=new ot({type:"@ngrx/devtools/pause"},+Date.now()),d++,f=c.length-1,p=p.concat(p[p.length-1]),m===c.length-2&&m++,f=1/0):W();break}case $i:{h={0:pt(Lt)},d=1,c=[0],u=[],w=e,m=0,p=[];break}case qi:{W();break}case Vi:{h={0:pt(Lt)},d=1,c=[0],u=[],m=0,p=[];break}case Ui:{let{id:I}=s;u.indexOf(I)===-1?u=[I,...u]:u=u.filter(H=>H!==I),f=c.indexOf(I);break}case eo:{let{start:I,end:g,active:H}=s,O=[];for(let $t=I;$t<g;$t++)O.push($t);H?u=Bi(u,O):u=[...u,...O],f=c.indexOf(I);break}case Qi:{m=s.index,f=1/0;break}case Ki:{let I=c.indexOf(s.actionId);I!==-1&&(m=I),f=1/0;break}case Gi:{c=Bi(c,u),u=[],m=Math.min(m,c.length-1);break}case mt:{if(P)return r||t;if(E||r&&pe(r.computedStates[m],s,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let g=p[p.length-1];p=[...p.slice(0,-1),an(a,s.action,g.state,g.error,o)],f=1/0;break}n.maxAge&&c.length===n.maxAge&&N(1),m===c.length-1&&m++;let I=d++;h[I]=s,c=[...c,I],f=c.length-1;break}case he:{({monitorState:_,actionsById:h,nextActionId:d,stagedActionIds:c,skippedActionIds:u,committedState:w,currentStateIndex:m,computedStates:p,isLocked:P,isPaused:E}=s.nextLiftedState);break}case lt:{f=0,n.maxAge&&c.length>n.maxAge&&(p=Bt(p,f,a,w,h,c,u,o,E),N(c.length-n.maxAge),f=1/0);break}case ht:{if(p.filter(g=>g.error).length>0)f=0,n.maxAge&&c.length>n.maxAge&&(p=Bt(p,f,a,w,h,c,u,o,E),N(c.length-n.maxAge),f=1/0);else{if(!E&&!P){m===c.length-1&&m++;let g=d++;h[g]=new ot(s,+Date.now()),c=[...c,g],f=c.length-1,p=Bt(p,f,a,w,h,c,u,o,E)}p=p.map(g=>y(v({},g),{state:a(g.state,so)})),m=c.length-1,n.maxAge&&c.length>n.maxAge&&N(c.length-n.maxAge),f=1/0}break}default:{f=1/0;break}}return p=Bt(p,f,a,w,h,c,u,o,E),_=i(_,s),{monitorState:_,actionsById:h,nextActionId:d,stagedActionIds:c,skippedActionIds:u,committedState:w,currentStateIndex:m,computedStates:p,isLocked:P,isPaused:E}}}var zi=(()=>{let t=class t{constructor(i,n,a,r,s,_,h,d){let c=lo(h,d.monitor),u=ho(h,c,_,d.monitor,d),w=Z(Z(n.asObservable().pipe(Se(1)),r.actions$).pipe(C(pt)),i,r.liftedActions$).pipe(ge(fe)),m=a.pipe(C(u)),p=nn(d.connectInZone),P=new ue(1);this.liftedStateSubscription=w.pipe(vt(m),Hi(p),xe(({state:W},[f,I])=>{let g=I(W,f);return f.type!==mt&&en(d)&&(g=ro(g,d.predicate,d.actionsSafelist,d.actionsBlocklist)),r.notify(f,g),{state:g,action:f}},{state:c,action:null})).subscribe(({state:W,action:f})=>{if(P.next(W),f.type===mt){let I=f.action;s.next(I)}}),this.extensionStartSubscription=r.start$.pipe(Hi(p)).subscribe(()=>{this.refresh()});let E=P.asObservable(),N=E.pipe(C(Ji));Object.defineProperty(N,"state",{value:ti(N,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=E,this.state=N}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new ot(i,+Date.now()))}refresh(){this.dispatch(new Yt)}reset(){this.dispatch(new te(+Date.now()))}rollback(){this.dispatch(new ee(+Date.now()))}commit(){this.dispatch(new ie(+Date.now()))}sweep(){this.dispatch(new ne)}toggleAction(i){this.dispatch(new oe(i))}jumpToAction(i){this.dispatch(new re(i))}jumpToState(i){this.dispatch(new ae(i))}importState(i){this.dispatch(new ce(i))}lockChanges(i){this.dispatch(new se(i))}pauseRecording(i){this.dispatch(new de(i))}};t.\u0275fac=function(n){return new(n||t)(l(Ht),l(xt),l(oi),l(on),l(Et),l(bt),l(ei),l(zt))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})();function Hi({ngZone:e,connectInZone:t}){return o=>t?new at(i=>o.subscribe({next:n=>e.run(()=>i.next(n)),error:n=>e.run(()=>i.error(n)),complete:()=>e.run(()=>i.complete())})):o}var po=new x("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function mo(e,t){return!!e||t.monitor!==Xi}function uo(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function rn(e={}){return X([on,Ht,zi,{provide:Ni,useValue:e},{provide:po,deps:[le,zt],useFactory:mo},{provide:le,useFactory:uo},{provide:zt,deps:[Ni],useFactory:no},{provide:ri,deps:[zi],useFactory:fo},{provide:ai,useExisting:Ht}])}function fo(e){return e.state}var go={restaurants:[],loading:!1,error:null},cn=et(go,M(it,e=>y(v({},e),{loading:!0})),M(Ft,(e,{restaurants:t})=>y(v({},e),{loading:!1,restaurants:t})),M(Tt,(e,{error:t})=>y(v({},e),{loading:!1,error:t})));var dn=(()=>{let t=class t{constructor(i){this.http=i,this.baseUrl="https://api.mocki.io/v2/aqprm7yv/restaurants"}getRestaurants(){return this.http.get(this.baseUrl)}};t.\u0275fac=function(n){return new(n||t)(l(tt))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ln=(()=>{let t=class t{constructor(i,n){this.actions$=i,this.restaurantService=n,this.loadRestaurants$=V(()=>this.actions$.pipe(G(it),L(()=>this.restaurantService.getRestaurants().pipe(C(a=>Ft({restaurants:a})),k(a=>S(Tt({error:a})))))))}};t.\u0275fac=function(n){return new(n||t)(l(q),l(dn))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})();var hn=(()=>{let t=class t{constructor(i){this.http=i,this.baseUrl="https://api.mocki.io/v2/aqprm7yv/menus"}getItems(i){return this.http.get(`${this.baseUrl}/${i}`)}};t.\u0275fac=function(n){return new(n||t)(l(tt))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pn=(()=>{let t=class t{constructor(i,n){this.actions$=i,this.itemService=n,this.loadItems$=V(()=>this.actions$.pipe(G(St),L(a=>this.itemService.getItems(a.menuId).pipe(C(r=>kt({items:r})),k(r=>S(At({error:r})))))))}};t.\u0275fac=function(n){return new(n||t)(l(q),l(hn))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})();var bo={items:[],loading:!1,error:null},mn=et(bo,M(St,e=>y(v({},e),{loading:!0,error:null})),M(kt,(e,{items:t})=>y(v({},e),{items:t,loading:!1})),M(At,(e,{error:t})=>y(v({},e),{error:t,loading:!1})));var un=(()=>{let t=class t{constructor(i,n){this.http=i,this.store=n,this.baseUrl="https://api.mocki.io/v2/aqprm7yv/order/"}postCart(i,n){let a=`${this.baseUrl}${i}`;return this.http.post(a,n,{responseType:"text"}).pipe(C(r=>{try{let s=r.replace(/(\w+):/g,'"$1":').replace(/'/g,'"');return JSON.parse(s)}catch{return r}}),k(this.handleError))}handleError(i){let n="Unknown error!";return i.error instanceof ErrorEvent?n=`Error: ${i.error.message}`:n=`Error Code: ${i.status}
Message: ${i.message}`,ve(n)}};t.\u0275fac=function(n){return new(n||t)(l(tt),l(A))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var fn=(()=>{let t=class t{constructor(i,n,a,r,s){this.actions$=i,this.cartService=n,this.store=a,this.router=r,this.snackBar=s,this.postCart$=V(()=>this.actions$.pipe(G(Ii),vt(this.store.select(Ci)),L(([_,h])=>h.length>0?this.cartService.postCart(1,h).pipe(C(d=>(this.router.navigate(["/"]).then(()=>{this.snackBar.open("Order placed successfully!","Close",{duration:3e3})}),Rt())),k(d=>(console.error("Post cart error:",d),S(Mt({error:d}))))):ut)))}};t.\u0275fac=function(n){return new(n||t)(l(q),l(un),l(A),l(wt),l(wi))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})();var Co={cartItems:[],totalCartItems:0,error:null,order:[],totalAmount:0},gn=et(Co,M(yi,(e,{cartItem:t})=>{let o=e.cartItems.find(r=>r.item.id===t.item.id),i;o?i=e.cartItems.map(r=>r.item.id===t.item.id?y(v({},r),{quantity:(r.quantity??0)+(t.quantity??0)}):r):i=[...e.cartItems,y(v({},t),{quantity:t.quantity??1})];let n=i.map(r=>({itemId:r.item.id??0,quantity:r.quantity})),a=i.reduce((r,s)=>r+(s?.item?.price??0)*(s.quantity??1),0);return y(v({},e),{cartItems:i,totalCartItems:e.totalCartItems+1,order:n,totalAmount:a})}),M(bi,(e,{cartItem:t})=>{let o=e.cartItems.map(a=>a.item.id===t.item.id?y(v({},a),{quantity:(a.quantity??0)-1}):a).filter(a=>a.quantity>0),i=o.map(a=>({itemId:a.item.id??0,quantity:a.quantity})),n=o.reduce((a,r)=>a+(r?.item?.price??0)*(r.quantity??1),0);return y(v({},e),{cartItems:o,totalCartItems:e.totalCartItems-1,order:i,totalAmount:n})}),M(Rt,e=>y(v({},e),{cartItems:[],error:null,totalCartItems:0,order:[],totalAmount:0})),M(Mt,(e,{error:t})=>y(v({},e),{error:t})));var vn=(()=>{let t=class t{constructor(i,n){this.actions$=i,this.store=n,this.hydrate$=V(()=>this.actions$.pipe(G(Dt),rt(()=>{try{let a=localStorage.getItem("cartState");if(a){let r=JSON.parse(a);return S(Ei({state:r}))}else return S(Ot({error:"No state to hydrate"}))}catch(a){return S(Ot({error:a}))}}),k(a=>S(Ot({error:a})))))}};t.\u0275fac=function(n){return new(n||t)(l(q),l(A))},t.\u0275prov=b({token:t,factory:t.\u0275fac});let e=t;return e})();function _n(e){return(t,o)=>{let i=e(t,o);return typeof window<"u"&&localStorage.setItem("cartState",JSON.stringify(i.cart)),i}}function yn(e){return(t,o)=>{if((o.type===lt||o.type===ht)&&typeof window<"u"){let i=localStorage.getItem("cartState");if(i)return y(v({},t),{cart:JSON.parse(i)})}return e(t,o)}}var bn={providers:[ze({eventCoalescing:!0}),Ye(Mi),We(),Fi(),Ge(),Ze(),ci({restaurant:cn,items:mn,cart:gn},{metaReducers:[_n,yn]}),Pi([ln,pn,fn,vn]),rn({maxAge:25,logOnly:!1})]};var wo={providers:[Xe()]},In=He(bn,wo);var xo=()=>Ke(Si,In),Tc=xo;export{Tc as a};
